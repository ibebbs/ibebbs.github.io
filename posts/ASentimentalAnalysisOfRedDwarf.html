
<!DOCTYPE html>
<html lang="en">
        <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

        <title>Ian Bebbington - A sentiment(al) analysis of why Red Dwarf is no longer funny</title>
        <meta name="description" content="IObservable&lt;Opinion&gt;" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        

        <link type="application/rss+xml" rel="alternate" title="Ian Bebbington" href="/feed.rss" />
                <link type="application/atom+xml" rel="alternate" title="Ian Bebbington" href="/feed.atom" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
        <link href="/assets/css/highlight.css" rel="stylesheet">
        <link href="/assets/css/clean-blog.css" rel="stylesheet" />
        <link href="/assets/css/master.css" rel="stylesheet" />
        <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link href="/assets/css/override.css" rel="stylesheet" />


        <meta name="application-name" content="Ian Bebbington" />
        <meta name="msapplication-tooltip" content="Ian Bebbington" />
        <meta name="msapplication-starturl" content="/" />

        <meta property="og:title" content="Ian Bebbington - A sentiment(al) analysis of why Red Dwarf is no longer funny" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="http://ian.bebbs.co.uk/posts/ASentimentalAnalysisOfRedDwarf" />
        <!-- TODO: More social graph meta tags -->

        <script src="/assets/js/jquery.min.js"></script>
        <script src="/assets/js/bootstrap.min.js"></script>     
        <script src="/assets/js/highlight.pack.js"></script>   
        <script src="/assets/js/clean-blog.js"></script>
        <script src="/assets/js/d3.v3.min.js"></script>
        <script src="/assets/js/trianglify.min.js"></script>
        <script src="/assets/js/Please-compressed.js"></script>
        <script src="/assets/js/background-check.min.js"></script>
                
        <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
        <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
        <!--[if lt IE 9]>
                <script src="/assets/js/html5shiv.js"></script>
                <script src="/assets/js/respond.min.js"></script>
        <![endif]-->
        
        


        </head>
        <body>
                
                <!-- Navigation -->
                <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
                        <div class="container-fluid">
                                <!-- Brand and toggle get grouped for better mobile display -->
                                <div class="navbar-header page-scroll">
                                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        </button>
                                        <a class="navbar-brand" href="/">Ian Bebbington</a>
                                </div>
                        
                                <!-- Collect the nav links, forms, and other content for toggling -->
                                <div class="collapse navbar-collapse" id="navbar-collapse">
                                        <ul class="nav navbar-nav navbar-right">
                                                        <li><a href="/posts">Archive</a></li>
        <li><a href="/tags">Tags</a></li>
        <li><a href="/about">About</a></li>
 
                                        </ul>
                                </div>
                                <!-- /.navbar-collapse -->
                        </div>
                        <!-- /.container -->
                </nav>
                
                <!-- Page Header -->
                <header class="intro-header" id="intro-header">
                        <div class="container">
                                <div class="row">
                                        <div class="col-md-12">

    
<div class="post-heading">
    <h1>A sentiment(al) analysis of why Red Dwarf is no longer funny</h1>
        <h2 class="subheading">A Jupyter [Data] Mining Core Project</h2>
    <div class="meta">        
Published on 31 January 2017<br>    </div>
        <div class="tags">
                    <a role="button" href="/tags/Data" class="btn btn-default btn-xs">Data</a>
                    <a role="button" href="/tags/F%23" class="btn btn-default btn-xs">F#</a>
                    <a role="button" href="/tags/Humour" class="btn btn-default btn-xs">Humour</a>
                    <a role="button" href="/tags/Jupyter" class="btn btn-default btn-xs">Jupyter</a>
                    <a role="button" href="/tags/Red-Dwarf" class="btn btn-default btn-xs">Red Dwarf</a>
        </div>     
</div>
                                        </div>
                                </div>
                        </div>
                </header>
                
                <!-- Main Content -->
                <div class="container">
                        <div class="row">
                                <div id="content" class="col-md-12">
                                        

<p>Yesterday I had a lot of fun playing with <a href="http://jupyter.org/">Project Jupyter</a>. For those that aren't aware of this project, it's an effort to provide a workspace for performing repeatable experimentation with data. In short it mixes markdown editing capabilities with a <a href="https://en.wikipedia.org/wiki/Read%E2%80%93eval%E2%80%93print_loop">REPL</a> environment for a large number of languages. From the website:</p>
<blockquote class="blockquote">
<p>&quot;a web application that allows you to create and share documents that contain live code, equations, visualizations and explanatory text. Uses include: data cleaning and transformation, numerical simulation, statistical modeling, machine learning and much more&quot;</p>
</blockquote>
<p>After having my interest tweaked by the <a href="https://try.jupyter.org/">browser version</a> I bit the bullet and spent ages downloading and installing the <a href="http://jupyter.org/install.html">full version</a> to a virtual machine. It's a Python based web-app so requires quite a bit of setup and unfortunately I found the documentation to be a bit sparse.</p>
<p>And so it was that while trying to work out how to install the <a href="https://github.com/fsprojects/IfSharp">FSharp module</a> I came across <a href="https://notebooks.azure.com/">Azure Notebooks</a>. This is a free, Azure hosted version of Jupyter that has almost all the features of a local installation but with none of the faff. After quickly spinning up a new notebook here I didn't even look back at the local installation.</p>
<h2 id="a-jupyter-data-mining-core-project">A Jupyter [Data] Mining Core Project</h2>
<p>As per the title and lead of this post, I decided to use Jupyter to have a little fun.</p>
<p>Back in September, while grinding my way through <a href="http://www.imdb.com/title/tt0094535/episodes?season=11&amp;ref_=tt_eps_sn_11">season 11 of Red Dwarf</a>, I began to wonder why it wasn't as funny as it used to be. Had the writing deteriorated? Were the actors past it? Or were these elements still as great as they used to be and it was me who had changed?</p>
<p>I started thinking about ways this could be investigated such as:</p>
<ul>
<li>Using IMDB rating as a measure of humour in each episode of Red Dwarf</li>
<li>Performing semantic analysis of episode's transcript to see if the sentiment had changed</li>
<li>Using word-count to determine whether there was a correlation between character participation and overall humour</li>
<li>etc</li>
</ul>
<p>Well, it was a funny notion and provided a pleasant distraction from the <a href="http://www.imdb.com/title/tt5218266">pretty awful episode</a> of Red Dwarf I was watching at the time. I added it to my &quot;ideas&quot; list in <a href="https://trello.com/b/KoTWuFUi/public-board">Trello</a>, finished the episode and went to bed.</p>
<p>Yesterday, when I came across Project Jupyter, I knew it'd be a great medium for performing this investigation so shifted the analysis from &quot;Ideas&quot; to &quot;In progress&quot; and got cracking.</p>
<h2 id="data-science-using-f">Data Science using F#</h2>
<p>Now, while in relation to this investigation I use the term &quot;data science&quot; to basically mean &quot;munging a few numbers and drawing a few graphs&quot;, I do think F# makes a fantastic language for the discipline in general. It has some incredible mechanisms for <a href="https://docs.microsoft.com/en-us/dotnet/articles/fsharp/tutorials/type-providers/">acquiring</a> and <a href="http://fsharpforfunandprofit.com/posts/the-option-type/">cleaning</a> data as well as for <a href="http://www.quanttec.com/fparsec/">parsing natural language</a>. Couple this with it's concise, functional, elegant language and the ability to leverage components from the entire breadth of .NET ecosystem and you have quite a significant offering.</p>
<h2 id="azure-notebooks">Azure Notebooks</h2>
<p>The Azure implementation of Project Jupyter is first class and, for now at least, totally free. Getting started is as simple as logging in with Microsoft credentials and then clicking 'Add notebook'. Being an MS implementation, I used Edge to edit the notebook and found the experience extremely robust, especially given it's a &quot;Preview&quot; program.</p>
<p>In fact I experience just two issues while authoring my notebook:</p>
<ol>
<li>Data Store - It's not currently possible to upload or store data within the Azure notebook library (despite having functionality to do this in the web-interface). Instead you need to host your data on one of a small number of whitelisted sites. Fortunately Github is one of these sites so this doesn't prove to be much of an issue.</li>
<li>Packages - While Azure Notebooks provides access to a large number of packages &quot;out-of-the-box&quot; (i.e. FSharp.Data, XPlot.Plotly, etc) it can be tricky to add/use other packages. For example, I wanted to use the XPlot.GoogleCharts package (as it provided trendline capabilities) and ended up having to write a custom display printer for it to work (due to an <a href="https://github.com/fsprojects/IfSharp/issues/118">open issue</a> on Github).</li>
</ol>
<p>Apart from these issues, authoring and scripting F# in an Azure Notebook was almost as fast as using <a href="https://docs.microsoft.com/en-us/dotnet/articles/fsharp/tutorials/fsharp-interactive/">&quot;F# Interactive&quot;</a>. It even provides Intellisense capabilities but, in practice, these are usually too slow to be of actual use.</p>
<h2 id="sharing-notebooks">Sharing Notebooks</h2>
<p>From Azure Notebooks you're able to download your notebook as a native &quot;.ipynb&quot; file (in fact this is encouraged as MS reserves the right to remove unused notebooks after 60 days). You can then share this file to other people who have Jupyter installed or, preferably, commit it to a repository in Github which has excellent support for Jupyter Notebooks.</p>
<p>You can find my notebook &quot;A sentiment(al) analysis of why Red Dwarf is no longer funny (to me)&quot; <a href="https://github.com/ibebbs/RedDwarfAnalysis/blob/master/Investigation.ipynb">here</a>. As you will see when you click the link, Github not only shows you the static parts of the notebook but actually tries to spin up a kernel and execute the code parts too. This is a &quot;limited rendering only&quot; so Github also provides a link to open the notebook in 'nbviewer' <a href="http://nbviewer.jupyter.org/github/ibebbs/RedDwarfAnalysis/blob/2712285e1f9c69fc347bdfe6404792101eaea5f1/Investigation.ipynb">web-app</a>. This link is shown below:</p>
<img src="https://mvpfyw-dm2306.files.1drv.com/y3mppldGfaYEhvWkV7mdUw26-lP3SOzlMTGFbf8slchIfjBL57IH-GrJev6ai_rISiHBKrom7Abg9YFjfhZ1ArOFT7a7mh4gJuGq-CErv1dun48GQC_BdhMV08fh6hbw400d9nHSEXJ0jA2nPBIrpOPNrOz0I3lVY1tu_L656ylQKg?width=660&height=283&cropmode=none" class="img-responsive" style="margin: auto; width:660; margin-top: 6px; margin-bottom: 6px;" alt="Open external view with nbviewer"/>
<h2 id="the-analysis">The analysis</h2>
<p>I had timeboxed my investigation into Project Jupyter and therefore didn't get round to performing an actual sentiment anaylsis of the content of each episode. However I did manage to do the following:</p>
<ul>
<li>Programmatically download episode information from several sources in JSON format and use <a href="http://fsharp.github.io/FSharp.Data/library/JsonValue.html">JsonValue</a> to dynamically query these sources</li>
<li>Scrape demographically categorized rating information from IMDB and use <a href="http://fsharp.github.io/FSharp.Data/reference/fsharp-data-htmldocument.html">HtmlDocument</a> to parse the data into strong types</li>
<li>Resolve issue with rendering XPlot.GoogleCharts charts within the notebook and use these charts to provide an interactive visualisation of the decline in rating of Red Dwarf across time and demographic categories.</li>
</ul>
<p>This provided a fair stab at correlating episode rating with the overall decline in Red Dwarf's humourousness but is a long way short of any form of &quot;data science&quot;. It was both enlightening and a lot of fun doing this small project and I will certainly consider Azure Notebooks as a valuable tool in my toolbox.</p>
<p>Should I find the time, I would certainly like to return to this project and use <a href="http://www.quanttec.com/fparsec/">FParsec</a> and <a href="https://azure.microsoft.com/en-gb/services/cognitive-services/text-analytics/">Azure Text Analytics</a> to perform an actual sentiment analysis. Hopefully it'll overturn, or at least help justify, my somewhat disturbing conclusion!</p>



                                </div>
                        </div>
                </div>
                
                <hr>
                
                <!-- Footer -->
                <footer>
                        <div class="container">
        <div class="row">
                <div class="col-md-12 text-center">
                    <p class="copyright text-muted">
                        Copyright © 2019
                        <br />
                            <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a>
                        |
                            <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
                        <br />
                        <strong><a href="https://wyam.io">Generated by Wyam</a></strong>
                    </p>
                </div>
        </div>
</div>

                </footer> 

                
                <script>hljs.initHighlightingOnLoad();</script>

                        <script type="text/javascript">                
                                // Header background                        
                                var colors = Please.make_color({
                                        colors_returned: 3,
                                        saturation: .6
                                });
                                var t = new Trianglify({
                                        x_gradient: colors,
                                        y_gradient: ["#FFFFFF"]
                                });
                                var header = document.getElementById("intro-header");
                                var pattern = t.generate(header.clientWidth, header.clientHeight);
                                header.setAttribute('style', 'background-image: ' + pattern.dataUrl);                        
                        </script>

                <script>
                        BackgroundCheck.init({
                                targets: '.intro-header,.navbar',
                                images: '.intro-header'
                        });
                </script>
        </body>
</html>


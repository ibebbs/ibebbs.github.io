
<!DOCTYPE html>
<html lang="en">
        <head>
        <meta charset="utf-8">
        <meta http-equiv="X-UA-Compatible" content="IE=Edge"/>

        <title>Ian Bebbington - Uno, Duo, Hey!</title>
        <meta name="description" content="IObservable&lt;Opinion&gt;" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0">        

        <link type="application/rss+xml" rel="alternate" title="Ian Bebbington" href="/feed.rss" />
                <link type="application/atom+xml" rel="alternate" title="Ian Bebbington" href="/feed.atom" />
        <link rel="shortcut icon" href="/favicon.ico" type="image/x-icon">
        <link rel="icon" href="/favicon.ico" type="image/x-icon">

        <link href="/assets/css/bootstrap.min.css" rel="stylesheet" />
        <link href="/assets/css/highlight.css" rel="stylesheet">
        <link href="/assets/css/clean-blog.css" rel="stylesheet" />
        <link href="/assets/css/master.css" rel="stylesheet" />
        <link href="/assets/css/font-awesome.min.css" rel="stylesheet" type="text/css">
        <link href='//fonts.googleapis.com/css?family=Lora:400,700,400italic,700italic' rel='stylesheet' type='text/css'>
        <link href='//fonts.googleapis.com/css?family=Open+Sans:300italic,400italic,600italic,700italic,800italic,400,300,600,700,800' rel='stylesheet' type='text/css'>
        <link href="/assets/css/override.css" rel="stylesheet" />


        <meta name="application-name" content="Ian Bebbington" />
        <meta name="msapplication-tooltip" content="Ian Bebbington" />
        <meta name="msapplication-starturl" content="/" />

        <meta property="og:title" content="Ian Bebbington - Uno, Duo, Hey!" />
        <meta property="og:type" content="website" />
        <meta property="og:url" content="http://ian.bebbs.co.uk/posts/UnoDuoHey" />
        <!-- TODO: More social graph meta tags -->

        <script src="https://cdn.jsdelivr.net/npm/jquery@3.5.1/dist/jquery.min.js"></script>

<link href="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.css" rel="stylesheet">
<link href="/assets/css/ekko-override.css" rel="stylesheet">
<script src="https://cdnjs.cloudflare.com/ajax/libs/ekko-lightbox/5.3.0/ekko-lightbox.min.js"></script>

<link rel="stylesheet" href="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.css" />
<script src="https://cdn.jsdelivr.net/gh/fancyapps/fancybox@3.5.7/dist/jquery.fancybox.min.js"></script>

<!-- Global site tag (gtag.js) - Google Analytics -->
<script async src="https://www.googletagmanager.com/gtag/js?id=UA-70151903-1"></script>
<script>
  window.dataLayer = window.dataLayer || [];
  function gtag(){dataLayer.push(arguments);}
  gtag('js', new Date());

  gtag('config', 'UA-70151903-1');
</script>


        </head>
        <body>
                
                <!-- Navigation -->
                <nav class="navbar navbar-default navbar-custom navbar-fixed-top">
                        <div class="container-fluid">
                                <!-- Brand and toggle get grouped for better mobile display -->
                                <div class="navbar-header page-scroll">
                                        <button type="button" class="navbar-toggle" data-toggle="collapse" data-target="#navbar-collapse">
                                        <span class="sr-only">Toggle navigation</span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        <span class="icon-bar"></span>
                                        </button>
                                        <a class="navbar-brand" href="/">Ian Bebbington</a>
                                </div>
                        
                                <!-- Collect the nav links, forms, and other content for toggling -->
                                <div class="collapse navbar-collapse" id="navbar-collapse">
                                        <ul class="nav navbar-nav navbar-right">
                                                        <li><a href="/posts">Archive</a></li>
        <li><a href="/tags">Tags</a></li>
        <li><a href="/about">About</a></li>
 
                                        </ul>
                                </div>
                                <!-- /.navbar-collapse -->
                        </div>
                        <!-- /.container -->
                </nav>
                
                <!-- Page Header -->
                <header class="intro-header" id="intro-header" style="background-image: url(&quot;/Content/UnoDuoHey/SurfaceDuo-Title.jpg&quot;)">
                        <div class="container">
                                <div class="row">
                                        <div class="col-md-12">

    
<div class="post-heading">
    <h1>Uno, Duo, Hey!</h1>
        <h2 class="subheading">Writing apps for the Surface Duo using the Uno platform</h2>
    <div class="meta">        
Published on 24 January 2020<br>    </div>
        <div class="tags">
                    <a role="button" href="/tags/NET-Core" class="btn btn-default btn-xs">.NET Core</a>
                    <a role="button" href="/tags/Android" class="btn btn-default btn-xs">Android</a>
                    <a role="button" href="/tags/gui" class="btn btn-default btn-xs">gui</a>
                    <a role="button" href="/tags/Uno-Platform" class="btn btn-default btn-xs">Uno Platform</a>
                    <a role="button" href="/tags/UWP" class="btn btn-default btn-xs">UWP</a>
                    <a role="button" href="/tags/XAML" class="btn btn-default btn-xs">XAML</a>
        </div>     
</div>
                                        </div>
                                </div>
                        </div>
                </header>
                
                <!-- Main Content -->
                <div class="container">
                        <div class="row">
                                <div id="content" class="col-md-12">
                                        

<h2 id="intro">Intro</h2>
<p>Last December I wrote <a href="https://ian.bebbs.co.uk/posts/Uno">a blog post</a> called &quot;The Seven GUIs of Christmas&quot; as part of the <a href="https://crosscuttingconcerns.com/The-Third-Annual-csharp-Advent">Third Annual C# Advent</a> series. This post showed the use of the <a href="https://platform.uno/">Uno Platform</a> to write cross-platform apps in UWP. One of the major drivers behind this blog post a desire to write apps for Microsoft's <a href="https://news.microsoft.com/october-2-2019/">recently announced Surface Neo and Surface Duo devices</a> which run Windows 10X and Android respectively. Well, a couple of days ago, Microsoft finally released a <a href="https://blogs.windows.com/windowsdeveloper/2020/01/22/announcing-dual-screen-preview-sdks-and-microsoft-365-developer-day/">preview SDK for the Surface Duo</a> which included an Android Emulator with a preview Surface Duo image. Today I finally got a chance to see whether the Uno Platform really could deliver on these new form-factors.</p>
<h2 id="installing-the-emulator">Installing the Emulator</h2>
<p>If, like me, you don't have Android Studio installed and/or you want to install the Surface Duo SDK in a non-standard location (my super-speedy Intel Optane 900P C:\ drive is getting a little crowded!), you're going to face issues running the emulator. This is mostly due to the <code>run.bat</code> file used to launch the emulator not looking in the correct location for the Android SDK and not supporting installation of the Surface Duo SDK in a path that contains spaces.</p>
<p>If you're encountering issues launching the emulator, navigate to the <code>artifacts</code> directory within the Surface Duo SDK installation directory and edit the <code>run.bat</code> file to the following:</p>
<pre><code class="language-cmd">&#64;echo off

rem ##### ENSURE THE SDK LOCATION BELOW IS CORRECT: #######
set ANDROID_SDK_LOCATION=C:\Program Files (x86)\Android\android-sdk

rem ############ DO NOT Modify below this line ############

set DIRNAME=%~dp0
if &quot;%DIRNAME%&quot; == &quot;&quot; set DIRNAME=.\

echo %DIRNAME%

rem Check if emulator is installed
set EMULATOR=%ANDROID_SDK_LOCATION%\emulator\emulator.exe
echo &quot;%EMULATOR%&quot;
if exist %EMULATOR% (
    set ANDROID_PRODUCT_OUT=%DIRNAME%
    &quot;%EMULATOR%&quot; -verbose -accel auto %* -sysdir &quot;%DIRNAME%\bin&quot; -kernel &quot;%DIRNAME%\bin\kernel-ranchu&quot; -datadir &quot;%DIRNAME%\bin\data&quot; -initdata &quot;%DIRNAME%\bin\userdata.img&quot; -vendor &quot;%DIRNAME%\bin\vendor-qemu.img&quot; -system &quot;%DIRNAME%\bin\system-qemu.img&quot; -initdata &quot;%DIRNAME%\bin\userdata.img&quot; -data &quot;%DIRNAME%\bin\userdata.img&quot;
) else (
    echo &quot;Can't find emulator executable, make sure its installed&quot;
)
</code></pre>
<p>TBH, the changes are mostly just encapsulating paths within quotes but hopefully this'll save you a little time.</p>
<p>Hopefully now, when you launch the emulator, you'll be greeted by this:</p>
<img src="/Content/UnoDuoHey/DuoEmulator.png" class="img-responsive" style="margin: auto; width:50%; margin-top: 6px; margin-bottom: 6px;" alt="Android Duo Emulator"/>
<p>Hmm... dual screens!</p>
<h2 id="getting-started">Getting Started</h2>
<p>Microsoft have done a great job of helping developers get started on this platform by supplying some great <a href="https://docs.microsoft.com/en-gb/dual-screen/android/">code-snippets and samples</a> in both <a href="https://github.com/microsoft/surface-duo-sdk-samples">Java</a> and <a href="https://github.com/microsoft/surface-duo-sdk-xamarin-samples">C# (using the Xamarin platform)</a>. Furthermore, the emulator &quot;just works&quot; with the Visual Studio IDE such that, once running, it appears as a standard deployment target allowing you to quickly get apps running within the Surface Duo image.</p>
<img src="/Content/UnoDuoHey/VisualStudioTargettingDuoEmulator.png" class="img-responsive" style="margin: auto; width:50%; margin-top: 6px; margin-bottom: 6px;" alt="VisualStudio Targetting The Duo Emulator"/>
<h2 id="cross-platform-dual-screen">Cross-Platform Dual-Screen</h2>
<p>My first priority with Uno was to make sure I could correctly interpret when the app was running on a single screen or across both screens. To do this, I took a look at the Xamarin samples and quickly saw that they used a <code>ScreenHelper</code> class to collate information on the current state of the app. This class is provided as part of the (very new - just two days old at time of writing!) <a href="https://www.nuget.org/packages/Xamarin.DuoSdk/0.0.3.2">Xamarin.DuoSdk nuget package</a>. Fortunately, when running on Android (or iOS), Uno runs on top of Xamarin meaning I could just add a reference to this package from the <code>Droid</code> head project of my Uno solution and start using this class right away.</p>
<p>The main functions of the <code>ScreenHelper</code> class were abstracted behind an <code>IDeviceHelper</code> interface so that each head project could provide a platform specific implementation and a small shim written around the <code>ScreenHelper</code> class to satisfy this interface. Finally, to provide responsiveness to changes, I again used my <a href="https://www.nuget.org/packages/MVx.Observable/">MVx.Observable nuget package</a> to dynamically call <code>IDeviceHelper</code> members and update properties on a view model whenever the application changed modes.</p>
<p>In very short order, I had this working:</p>
<iframe width="560" height="315" style="margin: auto; width:50%; margin-top: 6px; margin-bottom: 6px;" src="https://www.youtube.com/embed/MBPo9GvnX-Q" frameborder="0" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen></iframe>
<p>Just to highlight: this is completely standard UWP / C# code, running <em>unchanged</em> on a dual-screen Android device.</p>
<p>A few comments / caveats:</p>
<ol>
<li>The loading time of the Uno app in the emulator was due to the app being run, as debug, directly from the Visual Studio IDE and is not indicative of Uno Platform app start times.</li>
<li>The app disappearing when switching between screens or between single and dual screen modes is not due to the Uno Platform; this happen with apps that come as part of the Duo image.</li>
<li>Occasionally, when switching between single and dual screen modes, the app will just disappear. Again, this is nothing to do with the Uno Platform and happens with apps that come as part of the Duo image.</li>
</ol>
<h2 id="conclusion">Conclusion</h2>
<h3 id="surface-duo">Surface Duo</h3>
<p>While the Surface Duo Android Emulator image is undoubtedly rough around the edges (it is, after all, a preview) it manages to provide a tantalising taste of what using dual-screen devices could be like. Indeed, just running the Contacts and Calendar apps side-by-side boggles the mind with possible interactions between the two. Furthermore Microsoft have, in relatively short order, delivered a preview SDK from which it is possible to start developing new dual-screen apps or enhance existing apps to take advantage of a second screen. Exciting times!</p>
<h3 id="uno-platform">Uno Platform</h3>
<p>Per my experience while writing &quot;The Seven GUIs of Christmas&quot; post, the Uno Platform has continued to preform admirably and shows great promise for writing apps that will run natively across platforms <strong>and</strong> on dual screens. The only issue I had with Uno while writing the app above was the use of a &quot;Shared Project&quot; to share the Xaml/ViewModel between the various head projects. This approach (which <a href="https://ian.bebbs.co.uk/posts/Uno#six-points-opining">I recommended against</a> in my previous post) resulted in Visual Studio stubbornly refusing to show the Xaml editor and countless errors being shown in the error window despite everything compiling and running fine.</p>
<h3 id="code">Code</h3>
<p>All code for this post can be found in my <a href="https://github.com/ibebbs/UnoDuoHey">UnoDuoHey repository</a> on Github.</p>
<h2 id="lastly">Lastly...</h2>
<p>I am currently eager to find potential new clients interested in using the Uno Platform to deliver cross-platform apps and those looking to capitalise on the amazing potential of dual-screen devices in particular. If this sounds like you or your company, please feel free to drop me a line to discuss your project/ideas using any of the links below or from my <a href="https://ian.bebbs.co.uk/about">about page</a>.</p>



                                </div>
                        </div>
                </div>
                
                <hr>
                
                <!-- Footer -->
                <footer>
                        <div class="container">
        <div class="row">
                <div class="col-md-12">
                        <ul class="list-inline text-center">
    <li>
        <a href="https://twitter.com/ibebbs">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-twitter fa-stack-1x fa-inverse"></i>
            </span>
        </a>
    </li>
    <li>
        <a href="https://www.linkedin.com/in/ianbebbington/">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-linkedin fa-stack-1x fa-inverse"></i>
            </span>
        </a>
    </li>
    <li />
    <li>
        <a href="https://github.com/ibebbs">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-github fa-stack-1x fa-inverse"></i>
            </span>
        </a>
    </li>
    <li>
        <a href="https://stackoverflow.com/users/628821/ibebbs">
            <span class="fa-stack fa-lg">
                <i class="fa fa-circle fa-stack-2x"></i>
                <i class="fa fa-stack-overflow fa-stack-1x fa-inverse"></i>
            </span>
        </a>
    </li>
</ul>
                        <br />
                        <ul class="list-inline text-center">
                                <li>                                
                                        <!-- Buy Me A Coffee Button -->
                                        <style>.bmc-button img{width: 27px !important;margin-bottom: 1px !important;box-shadow: none !important;border: none !important;vertical-align: middle !important;}.bmc-button{line-height: 36px !important;height:37px !important;text-decoration: none !important;display:inline-flex !important;color:#FFFFFF !important;background-color:#FF813F !important;border-radius: 3px !important;border: 1px solid transparent !important;padding: 1px 9px !important;font-size: 22px !important;letter-spacing: 0.6px !important;box-shadow: 0px 1px 2px rgba(190, 190, 190, 0.5) !important;-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;margin: 0 auto !important;font-family:'Cookie', cursive !important;-webkit-box-sizing: border-box !important;box-sizing: border-box !important;-o-transition: 0.3s all linear !important;-webkit-transition: 0.3s all linear !important;-moz-transition: 0.3s all linear !important;-ms-transition: 0.3s all linear !important;transition: 0.3s all linear !important;}.bmc-button:hover, .bmc-button:active, .bmc-button:focus {-webkit-box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;text-decoration: none !important;box-shadow: 0px 1px 2px 2px rgba(190, 190, 190, 0.5) !important;opacity: 0.85 !important;color:#FFFFFF !important;}</style><link href="https://fonts.googleapis.com/css?family=Cookie" rel="stylesheet"><a class="bmc-button" target="_blank" href="https://www.buymeacoffee.com/BQKYdkpaN"><img src="https://bmc-cdn.nyc3.digitaloceanspaces.com/BMC-button-images/BMC-btn-logo.svg" alt="Buy me a coffee"><span style="margin-left:5px">Buy me a coffee</span></a>
                                </li>
                        </ul>
                        <p class="copyright text-muted">
                                Copyright © 2021. The opinions expressed herein are my own and do not represent those of my employer or any other third-party views in any way. This work is licensed under a <a href="http://creativecommons.org/licenses/by/4.0/" rel="license">Creative Commons Attribution 4.0 International License</a>.
                                <br />
                                <a href="/feed.rss"><i class="fa fa-rss"></i> RSS Feed</a> | <a href="/feed.atom"><i class="fa fa-rss"></i> Atom Feed</a>
                                <br />
                                <strong><a href="https://wyam.io">Generated by Wyam</a></strong>
                                <br />
                        <br />
                        </p>
                </div>
        </div>
</div>
                </footer> 

                <script src="/assets/js/jquery.min.js"></script>
                <script src="/assets/js/bootstrap.min.js"></script>     
                <script src="/assets/js/highlight.pack.js"></script>   
                <script src="/assets/js/clean-blog.js"></script>
                <script src="/assets/js/d3.v3.min.js"></script>
                <script src="/assets/js/trianglify.min.js"></script>
                <script src="/assets/js/Please-compressed.js"></script>
                <script src="/assets/js/background-check.min.js"></script>

                <!-- HTML5 Shim and Respond.js IE8 support of HTML5 elements and media queries -->
                <!-- WARNING: Respond.js doesn't work if you view the page via file:// -->
                <!--[if lt IE 9]>
                        <script src="/assets/js/html5shiv.js"></script>
                        <script src="/assets/js/respond.min.js"></script>
                <![endif]-->
                
                
                <script>hljs.initHighlightingOnLoad();</script>


                <script>
                        BackgroundCheck.init({
                                targets: '.intro-header,.navbar',
                                images: '.intro-header'
                        });
                </script>
        </body>
</html>

